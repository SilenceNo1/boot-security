<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.boot.security.server.dao.FinancingApplyDao">

	<sql id="where">
		<where>
			<if test="params.id != null and params.id != ''">
				and id = #{params.id} 
			</if>
			<if test="params.userId != null and params.userId != ''">
				and user_id = #{params.userId} 
			</if>
			<if test="params.companyId != null and params.companyId != ''">
				and company_id = #{params.companyId} 
			</if>
			<if test="params.money != null and params.money != ''">
				and money = #{params.money} 
			</if>
			<if test="params.deadline != null and params.deadline != ''">
				and deadline = #{params.deadline} 
			</if>
			<if test="params.flowDirection != null and params.flowDirection != ''">
				and flow_direction = #{params.flowDirection} 
			</if>
			<if test="params.serviceCompanyImg != null and params.serviceCompanyImg != ''">
				and service_company_img = #{params.serviceCompanyImg} 
			</if>
			<if test="params.invoiceImg != null and params.invoiceImg != ''">
				and invoice_img = #{params.invoiceImg} 
			</if>
			<if test="params.accountStatementImg != null and params.accountStatementImg != ''">
				and account_statement_img = #{params.accountStatementImg} 
			</if>
			<if test="params.auditReportImg != null and params.auditReportImg != ''">
				and audit_report_img = #{params.auditReportImg} 
			</if>
			<if test="params.otherImg != null and params.otherImg != ''">
				and other_img = #{params.otherImg} 
			</if>
			<if test="params.createTime != null and params.createTime != ''">
				and create_time = #{params.createTime} 
			</if>
		
		</where>
	</sql>

	<select id="count" resultType="int">
		select count(1) from financing_apply t
		<include refid="where" />
	</select>

	<select id="list" resultType="FinancingApply">
		select * from financing_apply t
		<include refid="where" />
		${params.orderBy}
		limit #{offset}, #{limit}
	</select>

	<update id="update">
		update financing_apply t
		<set>
			<if test="userId != null">
				user_id = #{userId}, 
			</if>
			<if test="companyId != null">
				company_id = #{companyId}, 
			</if>
			<if test="money != null">
				money = #{money}, 
			</if>
			<if test="deadline != null">
				deadline = #{deadline}, 
			</if>
			<if test="flowDirection != null">
				flow_direction = #{flowDirection}, 
			</if>
			<if test="serviceCompanyImg != null">
				service_company_img = #{serviceCompanyImg}, 
			</if>
			<if test="invoiceImg != null">
				invoice_img = #{invoiceImg}, 
			</if>
			<if test="accountStatementImg != null">
				account_statement_img = #{accountStatementImg}, 
			</if>
			<if test="auditReportImg != null">
				audit_report_img = #{auditReportImg}, 
			</if>
			<if test="otherImg != null">
				other_img = #{otherImg}, 
			</if>
			<if test="createTime != null">
				create_time = #{createTime}, 
			</if>

		</set>

		where t.id = #{id}
	</update>

</mapper>
